# –ó–∞–º–µ—Ç–∫–∏ AI –ø–æ –ü—Ä–æ–µ–∫—Ç—É PyRobot

---

## 1. –û–±—â–∞—è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –ü—Ä–æ–µ–∫—Ç—É PyRobot

* **–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:**
  * –í—Å–µ —Ç–µ—Å—Ç—ã: `python -m pytest -v tests/test_functional.py > test_log.log`
  * –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç: `python -m pytest -v tests/test_functional.py -k "–∏–º—è_—Ñ–∞–π–ª–∞.kum"  > test_log.log`
  * –í—Å–µ —Ñ–∞–π–ª—ã kum: `tests/polyakov_kum`
* **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —è–∑—ã–∫—É –ö—É–º–∏—Ä:** `kumir2-master/userdocs/`
* **–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ö—É–º–∏—Ä–∞ (C++):** `kumir2-master/src`
* **–ù–∞–∏–±–æ–ª–µ–µ –≤–∞–∂–Ω—ã–µ –∏—Å—Ö–æ–¥–Ω–∏–∫–∏:** `kumir2-master/src/kumir2-libs`, `kumir2-master/src/plugins`

---

## 0. –õ–ò–ù–¢–ï–† –ò –ö–ê–ß–ï–°–¢–í–û –ö–û–î–ê (–í–´–ü–û–õ–ù–ï–ù–û)

**‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù–û (21.01.2025):** –í—Å–µ –æ—à–∏–±–∫–∏ –ª–∏–Ω—Ç–µ—Ä–∞ flake8 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤–æ –≤—Å–µ—Ö Python —Ñ–∞–π–ª–∞—Ö!

**–ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:**
1. **–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω flake8 –ª–∏–Ω—Ç–µ—Ä** –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: `--max-line-length=88 --ignore=E501,W503,E203`
2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞:**
   - `pyrobot/backend/server.py` - —É–¥–∞–ª–µ–Ω–æ 200+ –ª–∏—à–Ω–∏—Ö —Ç–æ—á–µ–∫ —Å –∑–∞–ø—è—Ç–æ–π, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ç–∞–±—É–ª—è—Ü–∏—è
   - `pyrobot/backend/kumir_interpreter/utils.py` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤ –∏ docstring
   - `pyrobot/backend/kumir_interpreter/system_functions.py` - —Ç–∞–±—É–ª—è—Ü–∏—è ‚Üí 4 –ø—Ä–æ–±–µ–ª–∞
   - `pyrobot/backend/kumir_interpreter/safe_eval.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ç–∞–±—É–ª—è—Ü–∏—è
   - `pyrobot/backend/kumir_interpreter/string_utils.py` - —Ä–∞–∑–±–∏—Ç—ã –¥–ª–∏–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏
   - `pyrobot/backend/kumir_interpreter/text_functions.py` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

3. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
   - `tests/__init__.py` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –≤ –∫–æ–Ω—Ü–µ
   - `tests/test_functional.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –ø—Ä–æ–±–µ–ª—ã, –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫
   - `tests/test_parser.py` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –º–µ–∂–¥—É —Ñ—É–Ω–∫—Ü–∏—è–º–∏, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
   - `tests/test_tables.py` - —É–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ç–∞–±—É–ª—è—Ü–∏—è

4. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
   - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ –í–°–Ø —Ç–∞–±—É–ª—è—Ü–∏—è –≤ 4-–ø—Ä–æ–±–µ–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã
   - –£–¥–∞–ª–µ–Ω–æ 200+ –ª–∏—à–Ω–∏—Ö —Ç–æ—á–µ–∫ —Å –∑–∞–ø—è—Ç–æ–π
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ 50+ –Ω–∞—Ä—É—à–µ–Ω–∏–π –¥–ª–∏–Ω—ã —Å—Ç—Ä–æ–∫
   - –î–æ–±–∞–≤–ª–µ–Ω–æ 20+ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫ –º–µ–∂–¥—É —Ñ—É–Ω–∫—Ü–∏—è–º–∏
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ 30+ –ø—Ä–æ–±–ª–µ–º —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏

**–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞:** –ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º PEP8!

---

## 2. –¢–ï–ö–£–©–ê–Ø –ó–ê–î–ê–ß–ê: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –≤—ã–∑–æ–≤–æ–≤ –ø—Ä–æ—Ü–µ–¥—É—Ä (IN PROGRESS)

**üîß –°–¢–ê–¢–£–°:** –í –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (22.01.2025)

**–ü–†–û–ë–õ–ï–ú–ê:** –í—ã–∑–æ–≤—ã –ø—Ä–æ—Ü–µ–¥—É—Ä –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É—é—Ç—Å—è –≤ evaluator –≤—ã—Ä–∞–∂–µ–Ω–∏–π –≤–º–µ—Å—Ç–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä.

**–ö–û–†–ï–ù–¨ –ü–†–û–ë–õ–ï–ú–´:** –í `statement_handlers.py:163` –º–µ—Ç–æ–¥ `visitAssignmentStatement` –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏—è, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –≤—ã–∑–æ–≤—ã –ø—Ä–æ—Ü–µ–¥—É—Ä, –≤ `expression_evaluator` –≤–º–µ—Å—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∫ –º–µ—Ö–∞–Ω–∏–∑–º—É –≤—ã–∑–æ–≤–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä.

**–ß–¢–û –°–î–ï–õ–ê–ù–û:**
1. **–ê–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:** –í—ã—è–≤–ª–µ–Ω–∞ –¥–≤–æ–π–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏:
   - –§—É–Ω–∫—Ü–∏–∏: `expression_evaluator` ‚Üí `procedure_manager.call_function`  
   - –ü—Ä–æ—Ü–µ–¥—É—Ä—ã: `statement_handlers` ‚Üí `procedure_manager.call_procedure`

2. **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:**
   - `AlgorithmManager` —Å –º–µ—Ç–æ–¥–∞–º–∏ `is_function()` –∏ `is_procedure()` –≤ `definitions.py`
   - `visitProcedureCallStatement` –≤ `statement_handlers.py:608-629` (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–æ—Ü–µ–¥—É—Ä)
   - –ú–µ—Ç–æ–¥ `procedure_manager.call_procedure()` (–ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é)

3. **–°–æ–∑–¥–∞–Ω–∏–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞:** –î–æ–±–∞–≤–ª–µ–Ω `_extract_procedure_name_from_expression()` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏–º–µ–Ω –ø—Ä–æ—Ü–µ–¥—É—Ä –∏–∑ AST –≤—ã—Ä–∞–∂–µ–Ω–∏–π

4. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤:** –î–æ–±–∞–≤–ª–µ–Ω –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–π –∏–º–ø–æ—Ä—Ç `KumirLexer` –≤ `statement_handlers.py`

5. **–ù–∞—á–∞—Ç–∞ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏:** –ò–∑–º–µ–Ω—è–µ—Ç—Å—è `visitAssignmentStatement` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –≤—ã–∑–æ–≤–æ–≤ –ø—Ä–æ—Ü–µ–¥—É—Ä

**–ß–¢–û –û–°–¢–ê–õ–û–°–¨:**
1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∏–≥–Ω–∞—Ç—É—Ä—É procedure_manager.call_procedure:** –¢–µ–∫—É—â–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º
2. **–ó–∞–≤–µ—Ä—à–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—ã–∑–æ–≤ procedure_manager –¥–ª—è –≤—ã–∑–æ–≤–æ–≤ –ø—Ä–æ—Ü–µ–¥—É—Ä  
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—ã–∑–æ–≤—ã –ø—Ä–æ—Ü–µ–¥—É—Ä —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. **–û–±—Ä–∞–±–æ—Ç–∞—Ç—å –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏:** –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –≤—ã–∑–æ–≤–æ–≤ –ø—Ä–æ—Ü–µ–¥—É—Ä vs –æ–±—ã—á–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π

---

## 3. –ó–∞–¥–∞—á–∏ –ø–æ –î–æ—Ä–∞–±–æ—Ç–∫–µ –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞ –ö—É–ú–∏—Ä–∞ (–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –°–ø–∏—Å–æ–∫)

1. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ç–∏–ø–æ–≤:** –ü—Ä–∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–∏, –ø–µ—Ä–µ–¥–∞—á–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –≤ –æ–ø–µ—Ä–∞—Ü–∏—è—Ö.
2. **–û–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏:** –ì–ª–æ–±–∞–ª—å–Ω—ã–µ, –ª–æ–∫–∞–ª—å–Ω—ã–µ, –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ –∏–º–µ–Ω, –≤–∏–¥–∏–º–æ—Å—Ç—å –≤ –±–ª–æ–∫–∞—Ö.
3. **–ú–∞—Å—Å–∏–≤—ã:** –û–±—ä—è–≤–ª–µ–Ω–∏–µ, –¥–æ—Å—Ç—É–ø –ø–æ –∏–Ω–¥–µ–∫—Å—É, –∫–æ–Ω—Ç—Ä–æ–ª—å –≥—Ä–∞–Ω–∏—Ü, –º–Ω–æ–≥–æ–º–µ—Ä–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã.
4. **–ü—Ä–æ—Ü–µ–¥—É—Ä—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏:** –û–±—ä—è–≤–ª–µ–Ω–∏–µ, –≤—ã–∑–æ–≤, –ø–µ—Ä–µ–¥–∞—á–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ (–∑–Ω–∞—á–µ–Ω–∏–µ/—Å—Å—ã–ª–∫–∞ `–∞—Ä–≥ —Ä–µ–∑`), –≤–æ–∑–≤—Ä–∞—Ç –∑–Ω–∞—á–µ–Ω–∏–π, —Ä–µ–∫—É—Ä—Å–∏—è.
5. **–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã:** –†–µ–∞–ª–∏–∑–∞—Ü–∏—è (`—Ü–µ–ª`, `–≤–µ—â`, `–ª–æ–≥`, `—Ç–µ–∫—Å—Ç`, `–¥–ª–∏–Ω–∞`, `–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å`, `–≤–≤–æ–¥`, `–≤—ã–≤–æ–¥` –∏ —Ç.–¥.).
6. **–£–ø—Ä–∞–≤–ª—è—é—â–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:** –¶–∏–∫–ª—ã (`–Ω—Ü –¥–ª—è`, `–Ω—Ü –ø–æ–∫–∞`, `–∫—Ü`), —É—Å–ª–æ–≤–∏—è (`–µ—Å–ª–∏ ... —Ç–æ ... –∏–Ω–∞—á–µ ... –≤—Å–µ`), –≤—ã—Ö–æ–¥ –∏–∑ —Ü–∏–∫–ª–æ–≤ (`–≤—ã—Ö–æ–¥`).
7. **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö:** `—Ü–µ–ª`, `–≤–µ—â`, `–ª–æ–≥`, `—Å–∏–º`, `–ª–∏—Ç`. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤.
8. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:** –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ (`|` –¥–æ –∫–æ–Ω—Ü–∞ —Å—Ç—Ä–æ–∫–∏).
9. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ü–∞ —Ñ–∞–π–ª–∞ –∏ –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ, –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.

---

## 3. –ö–ª—é—á–µ–≤—ã–µ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –£–ª—É—á—à–µ–Ω–∏—è –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –ê—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –í—ã—Ä–∞–∂–µ–Ω–∏—è

**‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ë–ê–ì –ò–°–ü–†–ê–í–õ–ï–ù:** –ê—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–µ—Å—Ç `2-2+2.kum` –≤—ã–≤–æ–¥–∏–ª "–û—Ç–≤–µ—Ç: 2" –≤–º–µ—Å—Ç–æ "–û—Ç–≤–µ—Ç: 4" - –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞ –Ω–µ –≤—ã—á–∏—Å–ª—è–ª–∞—Å—å.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ `expression_evaluator.py`:**

1. **visitRelationalExpression:** –ó–∞–º–µ–Ω—ë–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø `ctx.expression()` –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π `ctx.additiveExpression()`
2. **visitAdditiveExpression:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –Ω–∞—Å—Ç–æ—è—â–∞—è –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞ –≤–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ–≥–æ pass-through
3. **visitMultiplicativeExpression:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ *, /, div, mod –æ–ø–µ—Ä–∞—Ü–∏–π
4. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏** —Å –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–º –∫–æ–¥–æ–º –≤ Python

**–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

* ‚úÖ `python test_current.py` ‚Üí "–û—Ç–≤–µ—Ç: 4" (–±—ã–ª–æ "–û—Ç–≤–µ—Ç: 2")
* ‚úÖ –ê—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ `2+2` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∫–∞–∫ `4`
* ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∏–ø–æ–≤ –¶–ï–õ/–í–ï–©

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç –¥–ª—è `2-2+2.kum`
2. –£–±—Ä–∞—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ print –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã
3. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –¥—Ä—É–≥–∏—Ö —É—Ä–æ–≤–Ω–µ–π –æ–ø–µ—Ä–∞—Ü–∏–π (—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ, –ª–æ–≥–∏—á–µ—Å–∫–∏–µ)

---

### –†–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ –û–ø–µ—Ä–∞—Ü–∏–∏

**‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ë–ê–ì –ò–°–ü–†–ê–í–õ–ï–ù:** –†–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (>, <, >=, <=, =, <>) —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–µ—Å—Ç `8-if.kum` –≤—ã–≤–æ–¥–∏–ª –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è - "5,7,7,5" –≤–º–µ—Å—Ç–æ "7,7,7,7".
–û–ø–µ—Ä–∞—Ü–∏—è `a > b` –≥–¥–µ a=5, b=7 –≤–æ–∑–≤—Ä–∞—â–∞–ª–∞ true –≤–º–µ—Å—Ç–æ false.

**–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:**

1. –í –∞–∫—Ç–∏–≤–Ω–æ–º —Ñ–∞–π–ª–µ `interpreter_components/expression_evaluator.py` –º–µ—Ç–æ–¥ `visitRelationalExpression` —Å–æ–¥–µ—Ä–∂–∞–ª —Ç–æ–ª—å–∫–æ `raise KumirNotImplementedError`
2. **–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –°–ò–ù–¢–ê–ö–°–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê:** –î–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±—ã–ª–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É:

   ```python
   return self.visit(ctx.relationalExpression(0))  # –ë–µ—Ä–µ–º –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç    def visitRelationalExpression(...):
   ```

   –ò–∑-–∑–∞ —ç—Ç–æ–≥–æ ANTLR –Ω–µ –º–æ–≥ –Ω–∞–π—Ç–∏ –º–µ—Ç–æ–¥ `visitRelationalExpression` –∏ –≤—ã–∑—ã–≤–∞–ª fallback –º–µ—Ç–æ–¥—ã.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

1. **–î–æ–±–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã:** `operator`, `KumirLexer` –¥–ª—è —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
2. **–î–æ–±–∞–≤–ª–µ–Ω —Å–ª–æ–≤–∞—Ä—å –æ–ø–µ—Ä–∞—Ü–∏–π:**

   ```python
   COMPARISON_OPS = {
       KumirLexer.EQ: operator.eq,   # =
       KumirLexer.NE: operator.ne,   # <>
       KumirLexer.LT: operator.lt,   # <
       KumirLexer.GT: operator.gt,   # >
       KumirLexer.LE: operator.le,   # <=
       KumirLexer.GE: operator.ge,   # >=
   }
   ```

3. **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π `visitRelationalExpression`:**
   * –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ü–µ–ø–æ—á–Ω—ã—Ö —Å—Ä–∞–≤–Ω–µ–Ω–∏–π —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ
   * –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ (int ‚Üî float)
   * –í–æ–∑–≤—Ä–∞—Ç `KumirValue` —Å –±—É–ª–µ–≤—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
4. **–ò–°–ü–†–ê–í–õ–ï–ù–´ –°–ò–ù–¢–ê–ö–°–ò–ß–ï–°–ö–ò–ï –û–®–ò–ë–ö–ò:** –†–∞–∑–¥–µ–ª–µ–Ω—ã –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π

**–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

* ‚úÖ –¢–µ—Å—Ç `8-if.kum` –ø—Ä–æ—Ö–æ–¥–∏—Ç: –ø–æ–ª—É—á–∞–µ–º –æ–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥ "7,7,7,7"
* ‚úÖ –†–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ `>`, `<`, `>=`, `<=`, `=`, `<>` —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
* ‚úÖ –£—Å–ª–æ–≤–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `–µ—Å–ª–∏` —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –±—É–ª–µ–≤—ã –∑–Ω–∞—á–µ–Ω–∏—è

**Debug –ø—Ä–æ—Ü–µ—Å—Å:**

* –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ —á–µ—Ä–µ–∑ –∞–Ω–∞–ª–∏–∑ debug –ª–æ–≥–æ–≤ - `visitRelationalExpression` –Ω–µ –≤—ã–∑—ã–≤–∞–ª—Å—è
* –ü—Ä–∏ `RelationalExpressionContext` —Å—Ä–∞–∑—É –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–ª—Å—è –∫ `visitAdditiveExpression`
* –ü—Ä–∏—á–∏–Ω–∞: —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏

**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** –í—Å–µ debug –ª–æ–≥–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã, –∫–æ–¥ –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω—É.

---

### –û–ø–µ—Ä–∞—Ü–∏–∏ –†–∞–≤–µ–Ω—Å—Ç–≤–∞

**‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ë–ê–ì –ò–°–ü–†–ê–í–õ–ï–ù:** –û–ø–µ—Ä–∞—Ü–∏–∏ —Ä–∞–≤–µ–Ω—Å—Ç–≤–∞ (= –∏ <>) —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–µ—Å—Ç `9-if.kum` –≤—ã–≤–æ–¥–∏–ª "–û–¥–Ω–æ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞" –≤–º–µ—Å—Ç–æ "–ë–æ—Ä–∏—Å —Å—Ç–∞—Ä—à–µ" –¥–ª—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö -3 –∏ 5.
–û–ø–µ—Ä–∞—Ü–∏—è `a = b` –≥–¥–µ a=-3, b=5 –≤–æ–∑–≤—Ä–∞—â–∞–ª–∞ true –≤–º–µ—Å—Ç–æ false.

**–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:**

1. –ú–µ—Ç–æ–¥ `visitEqualityExpression` –±—ã–ª —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω, –Ω–æ —Å–æ–¥–µ—Ä–∂–∞–ª —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫—É—é –æ—à–∏–±–∫—É —Å —Å–∫–ª–µ–µ–Ω—ã–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏ –∫–æ–¥–∞
2. **–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –°–ò–ù–¢–ê–ö–°–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê:** –°—Ç—Ä–æ–∫–∞ –∫–æ–¥–∞ –±—ã–ª–∞ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∞ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–∏:

   ```python
   return self.visit(ctx.equalityExpression(0))  # –ë–µ—Ä–µ–º –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç    def visitEqualityExpression(...):
   ```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–∑–¥–µ–ª–∏–ª–∏ —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞ –≤ –º–µ—Ç–æ–¥–µ `visitEqualityExpression`
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** –ú–µ—Ç–æ–¥ `visitEqualityExpression` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ —Å–ª–æ–≤–∞—Ä—å `COMPARISON_OPS`, —á—Ç–æ –∏ —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
3. **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:** –û–ø–µ—Ä–∞—Ü–∏–∏ `=` –∏ `<>` —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è —Å –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ–º —Ç–∏–ø–æ–≤

**–õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã 9-if.kum:**

* –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: a=-3, b=5
* –ü—Ä–æ–≤–µ—Ä–∫–∞ `a > b` (-3 > 5) ‚Üí false, –ø–µ—Ä–µ—Ö–æ–¥ –≤ else
* –ü—Ä–æ–≤–µ—Ä–∫–∞ `a = b` (-3 = 5) ‚Üí false (—Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!), –ø–µ—Ä–µ—Ö–æ–¥ –≤–æ –≤—Ç–æ—Ä–æ–π else
* –í—ã–≤–æ–¥: "–ë–æ—Ä–∏—Å —Å—Ç–∞—Ä—à–µ" ‚úÖ

**–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

* ‚úÖ –¢–µ—Å—Ç `9-if.kum` ‚Üí "–ë–æ—Ä–∏—Å —Å—Ç–∞—Ä—à–µ" (–±—ã–ª–æ "–û–¥–Ω–æ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞")
* ‚úÖ –¢–µ—Å—Ç `8-if.kum` ‚Üí –≤—Å—ë –µ—â—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ "7,7,7,7"
* ‚úÖ –û–ø–µ—Ä–∞—Ü–∏–∏ —Ä–∞–≤–µ–Ω—Å—Ç–≤–∞ –∏ –Ω–µ—Ä–∞–≤–µ–Ω—Å—Ç–≤–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
* ‚úÖ –¢–∏–ø—ã –ø—Ä–∏–≤–æ–¥—è—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏–π (int ‚Üî float)

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–æ–≤:** 15 –ø—Ä–æ—Ö–æ–¥—è—Ç, 49 –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç (—Ä–µ–≥—Ä–µ—Å—Å–∏–π –Ω–µ—Ç)

---

## 4. –£—Ç–æ—á–Ω–µ–Ω–∏—è –ø–æ –°–µ–º–∞–Ω—Ç–∏–∫–µ –Ø–∑—ã–∫–∞ –ö—É–ú–∏—Ä–∞

### –ö–æ–º–∞–Ω–¥–∞ `–≤—ã–≤–æ–¥` –∏ –∞—Ä–≥—É–º–µ–Ω—Ç `–Ω—Å`

**–ò—Å—Ç–æ—á–Ω–∏–∫:** `kum_reference.md`.

* **–ö–æ–º–∞–Ω–¥–∞ `–≤—ã–≤–æ–¥`**: –ü–µ—á–∞—Ç–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã –ø–æ–¥—Ä—è–¥. **–ù–µ –¥–æ–±–∞–≤–ª—è–µ—Ç** –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É (`\n`) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –∫–æ–Ω—Ü–µ.
* **–ê—Ä–≥—É–º–µ–Ω—Ç `–Ω—Å`**: –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –≤ `–≤—ã–≤–æ–¥` –æ–∑–Ω–∞—á–∞–µ—Ç "–Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å —Å–∏–º–≤–æ–ª –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏ (`\n`)".
* **–ò—Ç–æ–≥**: –ù–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–∞–º, –≥–¥–µ –≤ `–≤—ã–≤–æ–¥` —É–∫–∞–∑–∞–Ω `–Ω—Å`.

**–ü—Ä–∏–º–µ—Ä –∏–∑ `kum_reference.md` –¥–ª—è `–≤—ã–≤–æ–¥`:**

```kumir
–∞–ª–≥
–Ω–∞—á
  —Ü–µ–ª –∞; –∞ := 3
  –≤–µ—â –±; –± := 1.3
  –Ω—Ü 5 —Ä–∞–∑
    –≤—ã–≤–æ–¥ –∞, " ", –±, "–ü—Ä–∏–≤–µ—Ç!", –Ω—Å
  –∫—Ü
–∫–æ–Ω
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

```
3 1.3–ü—Ä–∏–≤–µ—Ç!
3 1.3–ü—Ä–∏–≤–µ—Ç!
3 1.3–ü—Ä–∏–≤–µ—Ç!
3 1.3–ü—Ä–∏–≤–µ—Ç!
3 1.3–ü—Ä–∏–≤–µ—Ç!
```

–ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –≤—ã–≤–æ–¥–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –ø–µ—Ä–µ–≤–æ–¥–æ–º —Å—Ç—Ä–æ–∫–∏ –∏–º–µ–Ω–Ω–æ –±–ª–∞–≥–æ–¥–∞—Ä—è `–Ω—Å` –≤ –∫–æ–Ω—Ü–µ —Å–ø–∏—Å–∫–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ `–≤—ã–≤–æ–¥`.

**–ü—Ä–∏–º–µ—Ä `2-2+2.kum` —Å –Ω–æ–≤—ã–º –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º:**
–§–∞–π–ª `tests/polyakov_kum/2-2+2.kum`:

```kumir
–∞–ª–≥ –û–ø–µ—Ä–∞—Ç–æ—Ä –≤—ã–≤–æ–¥–∞
–Ω–∞—á
  –≤—ã–≤–æ–¥ '2+'        | –í—ã–≤–µ–¥–µ—Ç "2+" –±–µ–∑ –ø–µ—Ä–µ–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏
  –≤—ã–≤–æ–¥ '2=?`, –Ω—Å   | –í—ã–≤–µ–¥–µ—Ç "2=?", –∑–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç –ø–µ—Ä–µ–≤–æ–¥ —Å—Ç—Ä–æ–∫–∏ (–∏–∑-–∑–∞ –Ω—Å)
  –≤—ã–≤–æ–¥ '–û—Ç–≤–µ—Ç: 4'  | –í—ã–≤–µ–¥–µ—Ç "–û—Ç–≤–µ—Ç: 4" –±–µ–∑ –ø–µ—Ä–µ–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏ (–µ—Å–ª–∏ —ç—Ç–æ –∫–æ–Ω–µ—Ü –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏–ª–∏ –¥–∞–ª—å—à–µ –Ω–µ—Ç –≤—ã–≤–æ–¥–∞ —Å –Ω—Å)
–∫–æ–Ω
```

–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥ `tests/polyakov_kum/2-2+2-out.txt`:

```
2+2=?
–û—Ç–≤–µ—Ç: 4
```

–≠—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–µ:

1. `–≤—ã–≤–æ–¥ '2+'` -> –ø–µ—á–∞—Ç–∞–µ—Ç "2+". –ë—É—Ñ–µ—Ä: `"2+"`
2. `–≤—ã–≤–æ–¥ '2=?`, –Ω—Å` -> –ø–µ—á–∞—Ç–∞–µ—Ç "2=?". –ó–∞—Ç–µ–º `–Ω—Å` –ø–µ—á–∞—Ç–∞–µ—Ç `\\n`. –ë—É—Ñ–µ—Ä:`"2+2=?\\n"`
3. `–≤—ã–≤–æ–¥ '–û—Ç–≤–µ—Ç: 4'` -> –ø–µ—á–∞—Ç–∞–µ—Ç "–û—Ç–≤–µ—Ç: 4". –ë—É—Ñ–µ—Ä: `"2+2=?\\n–û—Ç–≤–µ—Ç: 4"`
–ï—Å–ª–∏ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –Ω–µ—Ç –¥—Ä—É–≥–∏—Ö –≤—ã–≤–æ–¥–æ–≤, —Ç–æ —Ç–∞–∫ –∏ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è. –ï—Å–ª–∏ —ç—Ç–æ –∫–æ–Ω–µ—Ü –ø—Ä–æ–≥—Ä–∞–º–º—ã, —Ç–æ —Ç–∞–∫–æ–π –≤—ã–≤–æ–¥ –∏ –±—É–¥–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–º.

**–í—ã–≤–æ–¥:** –≠—Ç–æ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –æ—Ç–º–µ–Ω—è–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∑–∞–º–µ—Ç–∫–∏, –≥–¥–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–ª–æ—Å—å, —á—Ç–æ `–Ω—Å` –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã `–≤—ã–≤–æ–¥` –ø–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏. –¢–µ–ø–µ—Ä—å —è—Å–Ω–æ: `–≤—ã–≤–æ–¥` –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∞ `–Ω—Å` —è–≤–ª—è–µ—Ç—Å—è —è–≤–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º –Ω–∞ –µ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ.

---

## 5. ‚úÖ –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨–°–ö–ò–• –§–£–ù–ö–¶–ò–ô (–ó–ê–í–ï–†–®–ï–ù–û!)

### ‚úÖ MILESTONE: –ü–æ–ª–Ω–∞—è –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –§—É–Ω–∫—Ü–∏–π

**üéâ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ü–†–û–†–´–í (2 –∏—é–Ω—è 2025):** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞—é—Ç!

#### ‚úÖ 5.1. –§–∞–∑–∞ 1: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ì—Ä–∞–º–º–∞—Ç–∏–∫–∏ –∏ –ü–∞—Ä—Å–∏–Ω–≥ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π

**–°–¢–ê–¢–£–°: –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í–û** - –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞ —É–∂–µ —Å–æ–¥–µ—Ä–∂–∞–ª–∞ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:
- ‚úÖ –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: `–∞–ª–≥`, `–∞—Ä–≥`, `—Ä–µ–∑`, `–∞—Ä–≥—Ä–µ–∑`, `–∑–Ω–∞—á`, `–Ω–∞—á`, `–∫–æ–Ω`
- ‚úÖ –ü—Ä–∞–≤–∏–ª–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞: `algorithmDefinition`, `parameterList`, `parameterDeclaration`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∏–ø–æ–≤ –∏ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π

#### ‚úÖ 5.2. –§–∞–∑–∞ 2: –°–æ–∑–¥–∞–Ω–∏–µ –°—Ç—Ä—É–∫—Ç—É—Ä –¥–ª—è –•—Ä–∞–Ω–µ–Ω–∏—è –ê–ª–≥–æ—Ä–∏—Ç–º–æ–≤

**–ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù–û:**
- ‚úÖ **–ö–ª–∞—Å—Å `Parameter`** –≤ `definitions.py` - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å —Ç–∏–ø–∞–º–∏ –∏ —Ä–µ–∂–∏–º–∞–º–∏
- ‚úÖ **–ö–ª–∞—Å—Å `AlgorithmDefinition`** - –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞
- ‚úÖ **–ö–ª–∞—Å—Å `AlgorithmManager`** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤
- ‚úÖ **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ `FunctionReturnException`** - –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ `–∑–Ω–∞—á := –≤—ã—Ä–∞–∂–µ–Ω–∏–µ`
- ‚úÖ **–î–≤—É—Ö–ø—Ä–æ—Ö–æ–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** - —Å–±–æ—Ä –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π + –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

#### ‚úÖ 5.3. –§–∞–∑–∞ 3.1: –ü–æ–ª–Ω–∞—è –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è –§—É–Ω–∫—Ü–∏–π

**–°–¢–ê–¢–£–°: –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù–û!**

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ **–í—ã–∑–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏–∑ –≤—ã—Ä–∞–∂–µ–Ω–∏–π**
- ‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±–ª–∞—Å—Ç—è–º–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏**
- ‚úÖ **–ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é (—Ä–µ–∂–∏–º `–∞—Ä–≥`)**
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤**
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ `–∑–Ω–∞—á := –≤—ã—Ä–∞–∂–µ–Ω–∏–µ` –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∑–Ω–∞—á–µ–Ω–∏–π**
- ‚úÖ **–†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π**
- ‚úÖ **–í–ª–æ–∂–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π**
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Expression Evaluator**

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
```
‚úÖ –ü—Ä–æ—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: —Å—É–º–º–∞(2, 3) ‚Üí 5
‚úÖ –†–µ–∫—É—Ä—Å–∏—è: —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª(5) ‚Üí 120
‚úÖ –õ–æ–≥–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏: —á–µ—Ç–Ω–æ–µ(4) ‚Üí –¥–∞
‚úÖ –í–ª–æ–∂–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã: —Ñ—É–Ω–∫—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–π
‚úÖ –¢–∏–ø–∏–∑–∞—Ü–∏—è: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ int/float/bool
```

#### üîÑ 5.4. –§–∞–∑–∞ 3.2: –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ü–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–í –ü–†–û–¶–ï–°–°–ï)

**–¢–ï–ö–£–©–ê–Ø –ó–ê–î–ê–ß–ê:** –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ —Å—Å—ã–ª–∫–µ

**–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
- üîÑ **–†–µ–∂–∏–º `—Ä–µ–∑`** - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –≤—ã–≤–æ–¥–∞
- üîÑ **–†–µ–∂–∏–º `–∞—Ä–≥—Ä–µ–∑`** - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ (–ø–æ —Å—Å—ã–ª–∫–µ)
- üîÑ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∞–±–ª–∏—á–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**
- üîÑ **–ü—Ä–æ—Ü–µ–¥—É—Ä—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Ä–µ–∑/–∞—Ä–≥—Ä–µ–∑**

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ (—É–∂–µ —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –∫–æ–¥–µ):**
- –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ç–æ–≤—ã (Parameter.mode –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Ä–µ–∂–∏–º—ã)
- –õ–æ–≥–∏–∫–∞ –¥–ª—è `—Ä–µ–∑` –∏ `–∞—Ä–≥—Ä–µ–∑` –Ω–∞–ø–∏—Å–∞–Ω–∞ –≤ `_call_user_function`
- –ù—É–∂–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é `_call_user_procedure`

---

## 6. –ò—Å—Ç–æ—Ä–∏—è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –û—Ç–ª–∞–¥–∫–∏ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –ù–∞—á–∞–ª–æ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –ü–µ—Ä–≤–∏—á–Ω–∞—è –û—Ç–ª–∞–¥–∫–∞

* **–ù–∞—á–∞–ª–æ –Ω–æ–≤–æ–π —Ñ–∞–∑—ã: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `ExpressionEvaluator`:**
  * **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ `interpreter.py` —Å –≤—ã–¥–µ–ª–µ–Ω–∏–µ–º `ExpressionEvaluator`.
  * **–ü–ª–∞–Ω –Ω–∞ —Ç–æ—Ç –º–æ–º–µ–Ω—Ç:**
        1. –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –º–µ—Ç–æ–¥–æ–≤ –≤ `pyrobot/backend/kumir_interpreter/interpreter_components/expression_evaluator.py`:
            *`visitUnaryExpression`
            * `visitPowerExpression`
            *–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤ `visitMultiplicativeExpression`
            * –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤ `visitAdditiveExpression`
        2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∏ —Ç—â–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å `ExpressionEvaluator`.

* **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –æ—Ç–ª–∞–¥–∫–∞ (—Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—è):**
  * **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –ù–∞—á–∞–ª—å–Ω—ã–π —ç—Ç–∞–ø —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ `ExpressionEvaluator` –∏ –µ–≥–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `KumirInterpreterVisitor` –∏ –¥—Ä—É–≥–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ (`ScopeManager`, `ProcedureManager`, `StatementHandler`, `DeclarationVisitorMixin`). –ó–∞–ø—É—Å–∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤.
  * **–û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏:**
        1. `TabError: inconsistent use of tabs and spaces in indentation` –≤ `pyrobot/backend/kumir_interpreter/kumir_exceptions.py`. (–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
        2. `ImportError: cannot import name 'KumirRuntimeError'` –∏–∑ `kumir_exceptions` –≤ `main_visitor.py`. (–î–æ–±–∞–≤–ª–µ–Ω –∫–ª–∞—Å—Å `KumirRuntimeError(KumirExecutionError)` –≤ `kumir_exceptions.py`, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
        3. `SyntaxError: unterminated f-string literal` –≤ `pyrobot/backend/kumir_interpreter/interpreter_components/expression_evaluator.py`. (–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
        4. `ImportError: cannot import name 'StatementVisitorMixin'` (–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ). (–°–æ–∑–¥–∞–Ω—ã –∑–∞–≥–ª—É—à–∫–∏, —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω `interpreter_components/__init__.py`, —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –≤ `main_visitor.py`, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
        5. –û—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –≤ `main_visitor.py` –ø–æ—Å–ª–µ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–º–ø–æ—Ä—Ç–æ–≤:
            *`Expected 0 positional arguments` –¥–ª—è `IOHandler`. (–î–æ–±–∞–≤–ª–µ–Ω –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –≤ `IOHandler`, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
            * `Cannot access attribute "visitArrayLiteral"` –¥–ª—è `ExpressionEvaluator`. (–î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≥–ª—É—à–∫–∏ `visit*` –≤ `ExpressionEvaluator`, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
        6. `SyntaxError: invalid syntax` (–∞—Ä—Ç–µ—Ñ–∞–∫—Ç `</rewritten_file>`) –≤ `pyrobot/backend/kumir_interpreter/interpreter_components/builtin_functions.py`. (–£–¥–∞–ª–µ–Ω–∞ –æ—à–∏–±–æ—á–Ω–∞—è —Å—Ç—Ä–æ–∫–∞, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
        7. `ImportError: cannot import name 'ScopeManager'` (—Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –º–µ–∂–¥—É `main_visitor.py` –∏ `interpreter_components/__init__.py`). (–£–±—Ä–∞–Ω –∏–º–ø–æ—Ä—Ç `KumirInterpreterVisitor` –∏–∑ `__init__.py`, –∏–º–ø–æ—Ä—Ç—ã –≤ `main_visitor.py` –∏–∑–º–µ–Ω–µ–Ω—ã –Ω–∞ –ø—Ä—è–º—ã–µ, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
        8. `AttributeError: 'KumirInterpreterVisitor' object has no attribute '_validate_and_convert_value_for_assignment'`. (–î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥–ª—É—à–∫–∞ –≤ `KumirInterpreterVisitor`, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∑–∞–≥–ª—É—à–∫–æ–π)
        9. `ImportError: cannot import name 'LoopBreakException'` –∏–∑ `kumir_exceptions`. (–î–æ–±–∞–≤–ª–µ–Ω—ã `LoopBreakException` –∏ `LoopContinueException` –≤ `kumir_exceptions.py`, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
        10. `AttributeError: 'KumirInterpreterVisitor' object has no attribute '_get_type_info_from_specifier'` –≤ `declaration_visitors.py`. (–ó–∞–º–µ–Ω–µ–Ω –Ω–∞ `self._get_type_from_specifier_node(type_spec_ctx)`, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
        11. `AttributeError: 'KumirInterpreterVisitor' object has no attribute '_create_variable_in_scope'` –≤ `declaration_visitors.py`. (–ó–∞–º–µ–Ω–µ–Ω –Ω–∞ `self.visitor.scope_manager.declare_variable(...)`, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
        12. `ImportError: cannot import name 'StopExecutionException'` –∏–∑ `kumir_exceptions` (–≤ `statement_handlers.py`).
            ***–ü—Ä–∏—á–∏–Ω–∞:** –í `kumir_exceptions.py` –±—ã–ª `StopExecutionSignal`, –æ–∂–∏–¥–∞–ª—Å—è `StopExecutionException`.
            * **–°—Ç–∞—Ç—É—Å –Ω–∞ —Ç–æ—Ç –º–æ–º–µ–Ω—Ç:** –í –ø—Ä–æ—Ü–µ—Å—Å–µ –æ—Ç–ª–∞–¥–∫–∏, –æ–∂–∏–¥–∞–ª—Å—è –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.

  * **–£—Ç–æ—á–Ω–µ–Ω–∏–µ –ø–æ `ExpressionEvaluator`:**
    * –î–≤–∞ —Ñ–∞–π–ª–∞:
    * **–ó–∞–¥–∞—á–∞:** –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –Ω–∞–ø–æ–ª–Ω–∏—Ç—å `interpreter_components/expression_evaluator.py`.

  * **–¢–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞ –Ω–∞ —Ç–æ—Ç –º–æ–º–µ–Ω—Ç (–æ—Å–Ω–æ–≤–Ω–∞—è):** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `ImportError: cannot import name 'StopExecutionException'`.

---

### –ì–ª—É–±–æ–∫–∞—è –û—Ç–ª–∞–¥–∫–∞ `statement_handlers.py` –∏ `utils.py`

* **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –§–æ–∫—É—Å –Ω–∞ –æ—à–∏–±–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ `statement_handlers.py` –∏ `utils.py`.
* **–û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏:**
    1. **`AttributeError: 'KumirTypeConverter' object has no attribute 'to_kumir_type'` –∏ `AttributeError: 'KumirValue' object has no attribute 'name'` –≤ `utils.py` (`to_python_number`)**:
        * **–ü—Ä–∏—á–∏–Ω–∞:** `KumirType` –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (`type_str`), –Ω–µ –≤—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω—ã.
        * **–°—Ç–∞—Ç—É—Å:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ `utils.py`.

    2. **`AttributeError: 'StatementHandler' object has no attribute 'visitExpression'` –∏ –¥—Ä—É–≥–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã `visit<RuleName>` –≤ `StatementHandler`**:
        * **–ü—Ä–∏—á–∏–Ω–∞:** `StatementHandler` –¥–æ–ª–∂–µ–Ω –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –æ—Ç `KumirParserVisitor` (ANTLR-—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π), –∞ –Ω–µ –æ—Ç `KumirVisitor`.
        * **–î–µ–π—Å—Ç–≤–∏—è:** –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å `StatementHandler` –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ `KumirParserVisitor`. –ò–º–ø–æ—Ä—Ç –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ `from .generated.KumirParserVisitor import KumirParserVisitor`.
        * **–°—Ç–∞—Ç—É—Å:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ `statement_handlers.py`.

    3. **–û—à–∏–±–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –∞—Ç—Ä–∏–±—É—Ç–∞–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ANTLR –≤ `statement_handlers.py` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ctx.ID()`, `ctx.block()`, `ctx.KW_WHILE`, `ctx.KW_ELSE`)**:
        * **–ü—Ä–∏—á–∏–Ω–∞:** –ò–∑–º–µ–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–æ–∫–µ–Ω–∞–º/–ø–æ–¥-–ø—Ä–∞–≤–∏–ª–∞–º –ø–æ—Å–ª–µ —Å–º–µ–Ω—ã –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `KW_WHILE()` —Å—Ç–∞–ª–æ `WHILE()`).
        * **–î–µ–π—Å—Ç–≤–∏—è (–≤ `statement_handlers.py`):**
            * `visitIfStatement`: `ctx.block(0)` -> `ctx.statementSequence(0)`, `ctx.KW_ELSE()` -> `ctx.ELSE()`.
            * `visitLoopStatement`: –ü–µ—Ä–µ–ø–∏—Å–∞–Ω –¥–ª—è `ctx.loopSpecifier()` (`WHILE()`, `FOR()`, `TIMES()`) –∏ `ctx.endLoopCondition()`. –î–æ–±–∞–≤–ª–µ–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±–ª–∞—Å—Ç—å—é –≤–∏–¥–∏–º–æ—Å—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Ü–∏–∫–ª–∞ `FOR`.
            * `visitSwitchStatement`: –ü–µ—Ä–µ–ø–∏—Å–∞–Ω –¥–ª—è –∏—Ç–µ—Ä–∞—Ü–∏–∏ –ø–æ `ctx.caseBlock()`, –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –∏–∑ `case_ctx.expression()`.
            * `visitIoStatement`: `ctx.KW_INPUT()` -> `ctx.INPUT()`, `ctx.KW_OUTPUT()` -> `ctx.OUTPUT()`. `arg.expr()` -> `arg.expression(0)`. (–ü–æ–∑–∂–µ —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –±—É–¥–µ—Ç –¥–æ—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è).
            * `visitAssignmentStatement`: `ctx.IDENTIFIER()` (–≤ `lvalue`) -> `ctx.qualifiedIdentifier().ID()`.
            * `visitProcedureCallStatement`: `ctx.procedureIdentifier()` -> `ctx.qualifiedIdentifier()`.
            * `visitExitStatement`: `ctx.KW_EXIT()` -> `ctx.EXIT()`.
            * `visitPauseStatement`: `ctx.KW_PAUSE()` -> `ctx.PAUSE()`.
            * –î–æ–±–∞–≤–ª–µ–Ω—ã `visitStopStatement`, `visitAssertionStatement` –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∞–≤–∏–ª –∏–∑ `KumirParser.py`.
            * –í—ã–∑–æ–≤—ã `self.visit(child_ctx)` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `self.interpreter.visit(child_ctx)` –¥–ª—è –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –≥–ª–∞–≤–Ω—ã–π –≤–∏–∑–∏—Ç–æ—Ä.
        * **–°—Ç–∞—Ç—É—Å:** –í –æ—Å–Ω–æ–≤–Ω–æ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ, –Ω–æ —Ç—Ä–µ–±–æ–≤–∞–ª–∞—Å—å –ø—Ä–æ–≤–µ—Ä–∫–∞.

    4. **–ü—Ä–æ–±–ª–µ–º—ã —Å —Å–∏–≥–Ω–∞–ª–∞–º–∏ `BreakSignal`, `ContinueSignal`, `ReturnSignal`, `ExitSignal`**:
        * **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ –±—ã–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã.
        * **–î–µ–π—Å—Ç–≤–∏—è:** –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–ª–∞—Å—Å—ã `BreakSignal`, `ContinueSignal`, `ReturnSignal`, `ExitSignal` –≤ `kumir_exceptions.py`.
        * **–°—Ç–∞—Ç—É—Å:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ.

    5. **–û—à–∏–±–∫–∏ –≤ `statement_handlers.py`:**
        * `AttributeError: Cannot access attribute "to_boolean" for class "KumirTypeConverter"`.
            * **–ü—Ä–∏—á–∏–Ω–∞:** –í `utils.py` –º–µ—Ç–æ–¥ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `to_python_bool`.
            * **–î–µ–π—Å—Ç–≤–∏–µ:** –í—ã–∑–æ–≤—ã `type_converter.to_boolean(...)` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `type_converter.to_python_bool(...)`. (–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
        * `CompileError: No parameter named "is_fatal"` –≤ `self.error_handler.runtime_error`.
            * **–ü—Ä–∏—á–∏–Ω–∞:** –ú–µ—Ç–æ–¥ `runtime_error` –≤ `ErrorHandler` (`utils.py`) –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `is_fatal`.
            * **–î–µ–π—Å—Ç–≤–∏–µ:** –ü–∞—Ä–∞–º–µ—Ç—Ä `is_fatal` —É–¥–∞–ª–µ–Ω –∏–∑ –≤—ã–∑–æ–≤–∞ –≤ `visitStopStatement`. (–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)

* **–ü–ª–∞–Ω –Ω–∞ —Ç–æ—Ç –º–æ–º–µ–Ω—Ç:**
    1. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é `statement_handlers.py` (—Ü–∏–∫–ª—ã, `–í–´–•–û–î`, `–í–û–ó–í–†–ê–¢`, `–°–¢–û–ü`, `–£–¢–í`, `–ü–ê–£–ó–ê`). –†–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å `visitBreakStatement`, `visitContinueStatement`. –£–±–µ–¥–∏—Ç—å—Å—è –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ `visitExitStatement`.
    2. –†–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –≤ `expression_evaluator.py` (`visitQualifiedIdentifier`, `visitLiteral`).

---

### 4. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∏ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `ExpressionEvaluator`

* **–ü–ª–∞–Ω (–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω–æ –¥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ `kumir_datatypes.py`):**
  * –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `kumir_datatypes.py` –∏ `utils.py`:
    * –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–µ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `KumirValue` –∏–∑ `utils.py`.
    * –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å `KumirFunction` –∏ `KumirTable` –≤ `kumir_datatypes.py`.
    * –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –≤ `expression_evaluator.py`.
  * –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ `expression_evaluator.py`:
    * –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã, –¥–æ—Å—Ç—É–ø –∫ —Ç–æ–∫–µ–Ω–∞–º `KumirParser` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `KumirParser.MUL`), –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤–º–µ—Å—Ç–æ `is_error`, –¥–æ—Å—Ç—É–ø –∫ –∞—Ç—Ä–∏–±—É—Ç–∞–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤, —É–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –º–µ—Ç–æ–¥–æ–≤, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è/–∏–º–ø–æ—Ä—Ç `get_kumir_type_name_from_py_value`.
  * –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ `ExpressionEvaluator`.

* **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `pyrobot/backend/kumir_interpreter/interpreter_components/expression_evaluator.py` (–æ—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞):**
  * **–¶–µ–ª—å:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∞—Ç—Ä–∏–±—É—Ç–∞–º ANTLR, —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –ø–æ—Å–µ—â–µ–Ω–∏—è, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –∏ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –Ω–æ–≤—ã–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏.
  * **–û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
    * –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã.
    * –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω `_get_error_info` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—à–∏–±–∫–∞—Ö –∏–∑ —É–∑–ª–æ–≤ ANTLR.
    * –ú–µ—Ç–æ–¥—ã `_perform_binary_operation` –∏ `_perform_unary_operation` –¥–µ–ª–µ–≥–∏—Ä—É—é—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ `self.visitor.operations_handler` (—Ç—Ä–µ–±—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏). –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫.
    * –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `visitLiteral` (—Ü–µ–ª—ã–µ, –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ, —Å—Ç—Ä–æ–∫–æ–≤—ã–µ, —Å–∏–º–≤–æ–ª—å–Ω—ã–µ, –ª–æ–≥–∏—á–µ—Å–∫–∏–µ).
    * –ù–∞—á–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `visitPrimaryExpression` (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã, `—Ä–µ–∑—É–ª—å—Ç–∞—Ç`, –≤—ã—Ä–∞–∂–µ–Ω–∏—è –≤ —Å–∫–æ–±–∫–∞—Ö). –î–æ—Å—Ç—É–ø –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º —á–µ—Ä–µ–∑ `self.visitor.scope_manager.find_variable()`.
    * –ù–∞—á–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `visitPostfixExpression` (–¥–æ—Å—Ç—É–ø –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º —Ç–∞–±–ª–∏—Ü, –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π/–ø—Ä–æ—Ü–µ–¥—É—Ä).
      * **–î–æ—Å—Ç—É–ø –∫ —Ç–∞–±–ª–∏—Ü–∞–º:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ (`KumirTableVar`), –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ –≥—Ä–∞–Ω–∏—Ü.
      * **–í—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π/–ø—Ä–æ—Ü–µ–¥—É—Ä:** –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–º–µ–Ω–∏, –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤. –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ `self.visitor.procedure_manager.call_procedure` –∏–ª–∏ `self.visitor.builtin_function_handler.call_builtin_function`.
    * –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω `visitUnaryExpression` (—Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞, –≤—ã–∑–æ–≤ `_perform_unary_operation`).
    * –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã `visitPowerExpression`, `visitMultiplicativeExpression`, `visitAdditiveExpression`, `visitRelationalExpression`, `visitEqualityExpression` (—Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π —Å–ø—É—Å–∫, –≤—ã–∑–æ–≤ `_perform_binary_operation`).
    * –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã `visitLogicalAndExpression`, `visitLogicalOrExpression` (—Å —Å–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–º –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ–º).
    * –î–æ–±–∞–≤–ª–µ–Ω `visitExpression` (–æ–±—â–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞).
    * –û–±—â–∏–π `visit(tree)` –≤—ã–∑—ã–≤–∞–µ—Ç `tree.accept(self)`.
    * –°—Ç–∞—Ä—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è lvalue (`_get_lvalue_structure_for_arg`, `_get_lvalue_for_assignment`, `_get_lvalue_for_read`) –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã.
  * **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –Ω–∞ —Ç–æ—Ç –º–æ–º–µ–Ω—Ç:**
        1. –°–æ–∑–¥–∞—Ç—å/–¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å `OperationsHandler`.
        2. –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å `visitPostfixExpression`.
        3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã.
        4. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –ø—É—Ç–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `KumirValue` –∏–ª–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ.
        5. –†–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π lvalue.

* **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–π –≤ `ExpressionEvaluator`:**
  * **–ü–ª–∞–Ω –¥–ª—è `_evaluate_postfix_expression` –≤ `interpreter_components/expression_evaluator.py`:**
        1. –ò–∑–≤–ª–µ—á—å –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ `primary_expr_ctx.qualifiedIdentifier().getText()`.
        2. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏–∑ `part_ctx.argumentList()`, –≤—ã—á–∏—Å–ª–∏—Ç—å –∏—Ö —Å –ø–æ–º–æ—â—å—é `self.evaluate()`.
        3. –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤—ã–∑–æ–≤ —á–µ—Ä–µ–∑ `self.visitor` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `self.visitor.call_user_function(...)`).
        4. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–ª—É—á–∞–π, –∫–æ–≥–¥–∞ `current_value` –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –≤—ã–∑—ã–≤–∞–µ–º—ã–º.

* **–ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π `expression_evaluator.py` (–≤–æ–∑–º–æ–∂–Ω–æ, –æ–±–æ–±—â–∞—é—â–∏–π –∏–ª–∏ —Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø):**
    1. –°–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫: —Å–∏–Ω—Ç–∞–∫—Å–∏—Å Python, –¥–æ—Å—Ç—É–ø –∫ ANTLR, –æ–±—Ä–∞–±–æ—Ç–∫–∞ `KumirValue`, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ —Ç–∏–ø—ã, –∞—Ç—Ä–∏–±—É—Ç—ã `KumirValue`, –¥—É–±–ª–∏–∫–∞—Ç—ã –º–µ—Ç–æ–¥–æ–≤, `get_kumir_type_name_from_py_value`.
    2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç `2+2.kum` –∏ –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å.
    3. –¢—â–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π.
    4. –£—Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞—Ç—å `visitPostfixExpression`.

---

### 5. –û—Ç–ª–∞–¥–∫–∞ `ProcedureManager` –∏ `KumirDatatypes`

* **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.
* **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:**
    1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ f-—Å—Ç—Ä–æ–∫–∏ –≤ `procedure_manager.py` (–±–ª–æ–∫ `except Exception as e:` –≤ `call_function`).
    2. –ü–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `call_function` –≤ `procedure_manager.py`:
        * –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `KumirType.from_string(return_type_str)`.
        * –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ `KumirType.UNKNOWN`.
        * –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `kumir_func_obj.type_converter.is_python_type_compatible_with_kumir_type()`.
        * –£–ª—É—á—à–µ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö `KumirTypeError`.
    3. –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã f-—Å—Ç—Ä–æ–∫–∏ –≤ `procedure_manager.py` (`get_function_definition`, `call_function`, `_collect_procedure_definitions`).
* **–°–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Ç–æ—Ç –º–æ–º–µ–Ω—Ç:**
  * `pyrobot/backend/kumir_interpreter/interpreter_components/procedure_manager.py` (–ü—Ä–æ—á–∏—Ç–∞–Ω, –ò–∑–º–µ–Ω–µ–Ω)
  * `pyrobot/backend/kumir_interpreter/kumir_datatypes.py` (–ü—Ä–æ—á–∏—Ç–∞–Ω, –ò–∑–º–µ–Ω–µ–Ω —Ä–∞–Ω–µ–µ)
* **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –Ω–∞ —Ç–æ—Ç –º–æ–º–µ–Ω—Ç:**
    1. –¢—â–∞—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏ –æ—à–∏–±–æ–∫.
    2. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞–¥ `ExpressionEvaluator`, –æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞–¥ `visitPostfixExpression`.

---

### 6. –¶–∏–∫–ª –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –û—à–∏–±–æ–∫ –∏ –ó–∞–≥–ª—É—à–µ–∫

* **–ü—Ä–æ–±–ª–µ–º–∞:** –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ –∫–æ–¥–∞ –≤ `statement_handlers.py` –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∏–º–ø–æ—Ä—Ç–æ–≤.
* **–û—à–∏–±–∫–∏ (–ø–µ—Ä–µ—á–µ–Ω—å):**
  * `ScopeManager`: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç `declare_array`, `update_table_element`, `get_variable_info`. –ú–µ—Ç–æ–¥—ã `update_variable`, `declare_variable` –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç `line_index`, `column_index`.
  * `ProcedureManager`: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç `set_return_value`, `call_procedure`.
  * ANTLR –∫–æ–Ω—Ç–µ–∫—Å—Ç: `ExitStatementContext` –Ω–µ –∏–º–µ–µ—Ç `LOOP_EXIT`, `PROCEDURE_EXIT`. `AssertionStatementContext` –Ω–µ –∏–º–µ–µ—Ç `stringLiteral`.
* **–ü–ª–∞–Ω:**
    1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥—Ä–∞–º–º–∞—Ç–∏–∫—É `KumirParser.g4` –¥–ª—è `exitStatement`, `assertionStatement`.
    2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∞—Ç—Ä–∏–±—É—Ç–∞–º ANTLR –≤ `statement_handlers.py`.
    3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –≤ `scope_manager.py`, `procedure_manager.py`.
    4. –î–æ–±–∞–≤–∏—Ç—å `line_index`, `column_index` –≤ `scope_manager.py`.
    5. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç `1-empty.kum`.

* **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≥–ª—É—à–µ–∫ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ç–µ—Å—Ç—É:**
  * **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –î–æ—Å—Ç—É–ø –∫ `ctx.LOOP_EXIT()`, `ctx.PROCEDURE_EXIT()`, `ctx.stringLiteral()` –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å.
  * **–ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π:**
        1. **`ScopeManager` (`scope_manager.py`):** –î–æ–±–∞–≤–∏—Ç—å `declare_array(...)`, `update_table_element(...)`, `get_variable_info(...)`. –î–æ–±–∞–≤–∏—Ç—å `line_index`, `column_index` –≤ `update_variable`, `declare_variable`.
        2. **`ProcedureManager` (`procedure_manager.py`):** –î–æ–±–∞–≤–∏—Ç—å `set_return_value(...)`, `call_procedure(...)`.
        3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç `1-empty.kum > test_log.log`.
        4. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å `test_log.log`.

* **–≠—Ç–∞–ø 3 (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `scope_manager.py`, –∑–∞–≥–ª—É—à–∫–∏ –≤ `procedure_manager.py`):**
  * **`scope_manager.py`:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ `if` –≤ `update_variable` (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–µ–π —Ç–∞–±–ª–∏—Ü).
  * **`procedure_manager.py`:**
    * –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥–ª—É—à–∫–∞ `set_return_value(self, value_to_assign: KumirValue)` (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç `self._current_procedure_return_value`).
    * –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥–ª—É—à–∫–∞ `call_procedure(self, proc_name: str, actual_args: List[Dict[str, Any]], line_index: int, column_index: int)` (–≤—ã–∑—ã–≤–∞–µ—Ç `NotImplementedError`).
  * **–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç `1-empty.kum`.

---

### 7. –ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è `expression_evaluator.py` –∏ `constants.py` (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –í—Ä—É—á–Ω—É—é)

* **–≠—Ç–∞–ø 4:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `SyntaxError: expected 'except' or 'finally' block` –≤ `expression_evaluator.py` (–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã —Å—Ç—Ä–æ–∫ ~369-370).
  * **–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç `1-empty.kum`.
* **–≠—Ç–∞–ø 5:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `SyntaxError: invalid syntax` –≤ `expression_evaluator.py` –Ω–∞ —Å—Ç—Ä–æ–∫–µ 423 (–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π `# ‚ïê—Ö 1 —à —ç—Ö 2 —à—ç—Ñ—Ö—ä—ë—Ä` –ø–æ—Å–ª–µ `else:`).
  * **–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç `1-empty.kum`.
* **–≠—Ç–∞–ø 6:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç—Å—Ç—É–ø–∞ —É –±–ª–æ–∫–∞ `else` (–∏–ª–∏ —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ `if/elif`) –≤ `expression_evaluator.py` (–æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, —Å—Ç—Ä–æ–∫–∞ ~423).
  * **–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç `1-empty.kum`.
* **–≠—Ç–∞–ø 7:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `ImportError` (DEFAULT_PRECISION).
  * **`pyrobot/backend/kumir_interpreter/interpreter_components/constants.py`:** –î–æ–±–∞–≤–ª–µ–Ω–∞ `DEFAULT_PRECISION = 10`.
  * **–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç `1-empty.kum`.

---

### 8. –î–æ—Ä–∞–±–æ—Ç–∫–∞ `statement_handlers.py` –∏ `utils.py`

* **–ü–ª–∞–Ω –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
    1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –í–í–û–î/–í–´–í–û–î –≤ `statement_handlers.py` (`visitIoStatement`) –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `ioArgumentList()`, `outputItem()`, `variableReference()`.
    2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å/–∏—Å–ø—Ä–∞–≤–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –≤–æ –≤—Å–µ—Ö `visit` –º–µ—Ç–æ–¥–∞—Ö –≤ `statement_handlers.py`.
    3. –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é `to_python_bool`, `to_python_number` –≤ `KumirTypeConverter` (`utils.py`).
    4. –î–æ–±–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç `Union` –∏–∑ `typing` –≤ `utils.py`.
* **–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:**
  * **`utils.py`:**
    * –î–æ–±–∞–≤–ª–µ–Ω `Union` –≤ –∏–º–ø–æ—Ä—Ç—ã `typing`.
    * –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã `to_python_bool` –∏ `to_python_number` –≤ `KumirTypeConverter`.

---

### 9. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ê–Ω–∞–ª–∏–∑ –ü–∞–¥–µ–Ω–∏–π –¢–µ—Å—Ç–æ–≤ (–§–æ–∫—É—Å –Ω–∞ `interpret_kumir`)

* **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ `1-primes.kum` (–ø–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞ `1-empty.kum`):**
  * **–ü–ª–∞–Ω:** –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç `1-primes.kum` —Å –≤—Ö–æ–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ `'100\n'` –∏ —Å—Ä–∞–≤–Ω–∏—Ç—å –≤—ã–≤–æ–¥.
  * –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å `test_log.log`.

* **–ü—Ä–æ–±–ª–µ–º–∞: –¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç, `actual_output` –∏–∑ `run_kumir_program` ‚Äì –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞.**
  * **–ü–ª–∞–Ω –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è:**
        1. –ü–æ–ª—É—á–∏—Ç—å –∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π –∫–æ–¥ `interpret_kumir` –∏–∑ `pyrobot/backend/kumir_interpreter/runtime_utils.py`.
        2. –°—Ä–∞–≤–Ω–∏—Ç—å —Å –≤–µ—Ä—Å–∏–µ–π –∏–∑ `old-interpreter.py` –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–∏–π –≤ –∑–∞—Ö–≤–∞—Ç–µ –≤—ã–≤–æ–¥–∞ (`try...finally`, `StringIO`).
        3. –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å, –∫–∞–∫ `IOHandler` –∏ `KumirInterpreterVisitor` –≤ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –≤—ã–≤–æ–¥.
        4. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∏—á–∏–Ω—É —Å–±–æ–µ–≤.
  * **–°–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:** `test_log.log`, `tests/test_functional.py`, `tests/polyakov_kum/`, `runtime_utils.py`, `old-interpreter.py`.

* **–ê–Ω–∞–ª–∏–∑ —Ç–µ—Å—Ç–æ–≤ PyRobot (–¥–µ—Ç–∞–ª—å–Ω—ã–π):**
  * **–ó–∞–¥–∞—á–∞:** –ü–æ–Ω—è—Ç—å, –ø–æ—á–µ–º—É —Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç, –≤—ã—è–≤–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é –ø—Ä–∏—á–∏–Ω—É.
  * **–í—ã–ø–æ–ª–Ω–µ–Ω–æ:**
    * –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ `pytest -v tests/test_functional.py` -> `test_log.log` (–ø–æ–ø—ã—Ç–∫–∞ 1).
    * –ê–Ω–∞–ª–∏–∑ `test_log.log` (–ø–æ–ø—ã—Ç–∫–∞ 1): 64 —Ç–µ—Å—Ç–∞ FAILED. `AssertionError`, `actual_output` –ø—É—Å—Ç. –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ –ª–æ–≥–∏ `stderr` –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç –ø—É—Å—Ç–æ–π –≤—ã–≤–æ–¥ –æ—Ç `interpret_kumir`.
    * –ê–Ω–∞–ª–∏–∑ —Å—Ç–∞—Ä–æ–π `interpret_kumir` –∏–∑ `old-interpreter.py`.
    * –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∞—è —á–∞—Å—Ç—å `interpret_kumir` –∏ –∫–ª–∞—Å—Å `DiagnosticErrorListener` –≤ `runtime_utils.py` –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏.
    * –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ `DiagnosticErrorListener` –≤ `runtime_utils.py`.
    * –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ -> `test_log.log` (–ø–æ–ø—ã—Ç–∫–∞ 2, –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è `runtime_utils.py`).
    * –ê–Ω–∞–ª–∏–∑ `test_log.log` (–ø–æ–ø—ã—Ç–∫–∞ 2): –í—Å–µ 64 —Ç–µ—Å—Ç–∞ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É FAILED. –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—É—Å—Ç—ã–º –≤—ã–≤–æ–¥–æ–º –æ—Å—Ç–∞–ª–∞—Å—å.
  * **–í—ã–≤–æ–¥:** –ü—Ä–æ–±–ª–µ–º–∞ –Ω–µ –≤ –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ `interpret_kumir` –≤ `runtime_utils.py` (–∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ –ø—Ä–∏–≤–µ–¥–µ–Ω–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–æ —Å—Ç–∞—Ä–æ–π), –∞ –≥–ª—É–±–∂–µ ‚Äì –≤ —Ç–æ–º, –∫–∞–∫ –Ω–æ–≤—ã–π –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä (`KumirInterpreterVisitor` –∏ –µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –æ—Å–æ–±–µ–Ω–Ω–æ `IOHandler`) –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å —Å–∏—Å—Ç–µ–º–æ–π –≤—ã–≤–æ–¥–∞, –∏–ª–∏ –∂–µ –æ–Ω –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã –≤—ã–≤–æ–¥–∞ –≤–æ–æ–±—â–µ.

---

## –°–≤–æ–¥–Ω—ã–π –ü–ª–∞–Ω –†–∞–±–æ—Ç –ø–æ –ü—Ä–æ–µ–∫—Ç—É PyRobot

1. **–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—É—Å—Ç—ã–º –≤—ã–≤–æ–¥–æ–º –≤ —Ç–µ—Å—Ç–∞—Ö:**
    * –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å, –∫–∞–∫ `IOHandler` –∏ `KumirInterpreterVisitor` (–∏ –µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã) –≤ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥ —Ç–∏–ø–∞ `–≤—ã–≤–æ–¥`.
    * –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–æ–º–∞–Ω–¥—ã –≤—ã–≤–æ–¥–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–æ—Å—Ç–∏–≥–∞—é—Ç `IOHandler` –∏ —á—Ç–æ `IOHandler` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –≤—ã–≤–æ–¥ –≤ `StringIO`, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ –≤ `interpret_kumir`.
    * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ª–∏ –≤–æ–æ–±—â–µ –∫–æ–¥, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞ –≤—ã–≤–æ–¥, –≤ –Ω–æ–≤–æ–º –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–µ.

2. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞ `ExpressionEvaluator` (`pyrobot/backend/kumir_interpreter/interpreter_components/expression_evaluator.py`):**
  * **–ü–µ—Ä–µ–Ω–æ—Å –ª–æ–≥–∏–∫–∏:** –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–µ—Ä–µ–Ω–æ—Å –∏ –∞–¥–∞–ø—Ç–∞—Ü–∏—é –ª–æ–≥–∏–∫–∏ –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ `expression_evaluator.py` –≤ –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç.
  * **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤ –ø–æ—Å–µ—â–µ–Ω–∏—è:**
        * –ó–∞–≤–µ—Ä—à–∏—Ç—å `visitUnaryExpression`.
        * –ó–∞–≤–µ—Ä—à–∏—Ç—å `visitPowerExpression`.
        * –ó–∞–ø–æ–ª–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—É—é –ª–æ–≥–∏–∫—É –≤ `visitMultiplicativeExpression`.
        * –ó–∞–ø–æ–ª–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—É—é –ª–æ–≥–∏–∫—É –≤ `visitAdditiveExpression`.
        * –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏ —Ç—â–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å `visitPostfixExpression`, –æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ (–≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–µ–π —Ç–∞–±–ª–∏—Ü—É, —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º –¥–æ—Å—Ç—É–ø–æ–º –ø–æ –∏–Ω–¥–µ–∫—Å—É; –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–º–µ–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤).
        * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å `visitQualifiedIdentifier` –∏ `visitLiteral`.
    * **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `OperationsHandler`:** –°–æ–∑–¥–∞—Ç—å –∏–ª–∏ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å `OperationsHandler` –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±–∏–Ω–∞—Ä–Ω—ã—Ö –∏ —É–Ω–∞—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å —É—á—ë—Ç–æ–º —Ç–∏–ø–æ–≤ –ö—É–º–∏—Ä–∞. –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å –µ–º—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π –∏–∑ `_perform_binary_operation` –∏ `_perform_unary_operation`.
    * **–û–±—Ä–∞–±–æ—Ç–∫–∞ lvalue:** –†–µ—à–∏—Ç—å, –≥–¥–µ –∏ –∫–∞–∫ –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ç–∞–±–ª–∏—Ü (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ `StatementHandler` –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è –∏–ª–∏ –≤–≤–æ–¥–∞). –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å/–∑–∞–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å lvalue.
    * **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å:**
        * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∏ –∏—Ö –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤.
        * –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –ø—É—Ç–∏ –∫–æ–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `KumirValue` –∏–ª–∏ –≤—ã–∑—ã–≤–∞—é—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º–æ–µ `ErrorHandler`.
        * –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ Python, –¥–æ—Å—Ç—É–ø –∫ –∞—Ç—Ä–∏–±—É—Ç–∞–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ANTLR, –æ–±—Ä–∞–±–æ—Ç–∫—É `KumirValue`, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ —Ç–∏–ø—ã, –∞—Ç—Ä–∏–±—É—Ç—ã `KumirValue`, –¥—É–±–ª–∏–∫–∞—Ç—ã –º–µ—Ç–æ–¥–æ–≤.
        * –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `get_kumir_type_name_from_py_value`.
    * **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
        * –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∏ —Ç—â–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å `ExpressionEvaluator`.
        * –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç `2+2.kum` –∏ –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ –≤–Ω–æ—Å–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

3. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞ `StatementHandler` (`pyrobot/backend/kumir_interpreter/statement_handlers.py`):**
    * **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤ `visit*`:**
        * –¢—â–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ç–∏–ø—ã —Ü–∏–∫–ª–æ–≤ (`–ü–û–ö–ê`, `–î–õ–Ø`, `N –†–ê–ó`, `–ù–¶...–ö–¶ –ü–û–ö–ê`, –ø—Ä–æ—Å—Ç–æ–π `–ù–¶...–ö–¶`).
        * –¢—â–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å `–í–´–•–û–î`, `–í–û–ó–í–†–ê–¢`, `–°–¢–û–ü`, `–£–¢–í` (—É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ), `–ü–ê–£–ó–ê`.
        * –†–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ `visitBreakStatement` –∏ `visitContinueStatement`. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –Ω—É–∂–Ω—ã –ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∏–ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–∏–≥–Ω–∞–ª–æ–≤.
        * –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `visitExitStatement` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–∑–ª–∏—á–∞–µ—Ç –≤—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –≤–æ–∑–≤—Ä–∞—Ç –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏/–ø—Ä–æ—Ü–µ–¥—É—Ä—ã –∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ —Ü–∏–∫–ª–∞ (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `ctx.LOOP_EXIT()`, `ctx.PROCEDURE_EXIT()`).
        * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `visitAssertionStatement` –∏ –¥–æ—Å—Ç—É–ø –∫ `ctx.stringLiteral()`.
    * **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å ANTLR:**
        * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥—Ä–∞–º–º–∞—Ç–∏–∫—É `KumirParser.g4` –¥–ª—è –≤—Å–µ—Ö –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø—Ä–∞–≤–∏–ª –≤ `statement_handlers.py`.
        * –ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∞—Ç—Ä–∏–±—É—Ç–∞–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ANTLR –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏.
        * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –≤–æ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö `visit` –º–µ—Ç–æ–¥–∞—Ö.
    * **–û–±—Ä–∞–±–æ—Ç–∫–∞ –í–í–û–î/–í–´–í–û–î:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å `visitIoStatement` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ ANTLR (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ioArgumentList()`, `outputItem()`, `variableReference()`).

4. **–î–æ—Ä–∞–±–æ—Ç–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞ `ProcedureManager` (`pyrobot/backend/kumir_interpreter/interpreter_components/procedure_manager.py`):**
    * **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≥–ª—É—à–µ–∫:** –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ª–æ–≥–∏–∫–æ–π –∑–∞–≥–ª—É—à–∫–∏ –º–µ—Ç–æ–¥–æ–≤ `set_return_value` –∏ `call_procedure`.
    * **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ç—â–∞—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏ –æ—à–∏–±–æ–∫ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø –≤–æ–∑–≤—Ä–∞—Ç–∞, –≤–æ–∑–≤—Ä–∞—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã, –Ω–µ–≤–æ–∑–≤—Ä–∞—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Ç.–¥.).

5. **–î–æ—Ä–∞–±–æ—Ç–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞ `ScopeManager` (`pyrobot/backend/kumir_interpreter/interpreter_components/scope_manager.py`):**
    * **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≥–ª—É—à–µ–∫:** –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ª–æ–≥–∏–∫–æ–π –∑–∞–≥–ª—É—à–∫–∏ –º–µ—Ç–æ–¥–æ–≤ `declare_array`, `update_table_element`, `get_variable_info`.
    * **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–æ–≤:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –º–µ—Ç–æ–¥—ã `update_variable`, `declare_variable` (–∏ –¥—Ä—É–≥–∏–µ, –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ) –ø—Ä–∏–Ω–∏–º–∞—é—Ç –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `line_index`, `column_index` –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –æ—à–∏–±–æ–∫.

6. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∏ –£—Ç–∏–ª–∏—Ç—ã:**
    * **`kumir_datatypes.py` –∏ `utils.py`:**
        * –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–µ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `KumirValue` –∏–∑ `utils.py` (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–¥–µ–ª–∞–Ω–æ).
        * –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–ª–∞—Å—Å—ã `KumirFunction` –∏ `KumirTable` –≤ `kumir_datatypes.py` (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–¥–µ–ª–∞–Ω–æ).
        * –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –≤ `expression_evaluator.py` –∏ –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —ç—Ç–∏—Ö –∫–ª–∞—Å—Å–æ–≤ –∏–∑ `kumir_datatypes.py`.
    * **`KumirTypeConverter` (–≤ `utils.py`):** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –º–µ—Ç–æ–¥—ã `to_python_bool` –∏ `to_python_number` –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç.

7. **–û–±—â–µ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞:**
    * –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø—É—Å–∫–∞—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `1-empty.kum`, `2-2+2.kum`).
    * –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å `test_log.log` –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º.
    * –ü—Ä–æ–≤–æ–¥–∏—Ç—å –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω—É—é –æ—Ç–ª–∞–¥–∫—É, —Ñ–æ–∫—É—Å–∏—Ä—É—è—Å—å –Ω–∞ –æ–¥–Ω–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –∏–ª–∏ –æ—à–∏–±–∫–µ –∑–∞ —Ä–∞–∑.
    * –ü–æ—Å–ª–µ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º —Å –≤—ã–≤–æ–¥–æ–º –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –±–∞–∑–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, –ø—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω—ã–π –ø—Ä–æ–≥–æ–Ω –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤: `python -m pytest -v tests/test_functional.py`.

8. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
    * –û–±–Ω–æ–≤–ª—è—Ç—å `AI_notes.md` —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º, –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è–º–∏.

---

## 18. –†–ê–ë–û–¢–ê –ù–ê–î –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨–°–ö–ò–ú–ò –§–£–ù–ö–¶–ò–Ø–ú–ò –ò –ü–†–û–¶–ï–î–£–†–ê–ú–ò (–í –ü–†–û–¶–ï–°–°–ï - –î–µ–∫–∞–±—Ä—å 2024)

**–¶–ï–õ–¨:** –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ (—Ñ—É–Ω–∫—Ü–∏–π –∏ –ø—Ä–æ—Ü–µ–¥—É—Ä) –≤ –ö—É–ú–∏—Ä–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±–ª–∞—Å—Ç—è–º–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏.

### –≠—Ç–∞–ø 1: –ê–Ω–∞–ª–∏–∑ –∏ –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ‚úÖ –ó–ê–í–ï–†–®–ï–ù

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
1. **–ê–Ω–∞–ª–∏–∑ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏ ANTLR** - –≤—ã—è—Å–Ω–∏–ª–æ—Å—å, —á—Ç–æ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞ —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –í–°–ï –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ (`algorithmDefinition`, `algorithmHeader`)
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å —Ä–µ–∂–∏–º–∞–º–∏ (`parameterList`, `parameterDeclaration`) - –∞—Ä–≥/—Ä–µ–∑/–∞—Ä–≥—Ä–µ–∑
   - –í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (`–∑–Ω–∞—á := –≤—ã—Ä–∞–∂–µ–Ω–∏–µ`)
   - –í—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö (`postfixExpression`)
   
2. **–°–æ–∑–¥–∞–Ω –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω** –≤ `FUNCTIONS_IMPLEMENTATION_PLAN.md` —Å 5 —Ñ–∞–∑–∞–º–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

3. **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥** - –Ω–∞–π–¥–µ–Ω–∞ —á–∞—Å—Ç–∏—á–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ `ProcedureManager`

### –≠—Ç–∞–ø 2: –°–æ–∑–¥–∞–Ω–∏–µ –°—Ç—Ä—É–∫—Ç—É—Ä –î–∞–Ω–Ω—ã—Ö ‚úÖ –ó–ê–í–ï–†–®–ï–ù

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
1. **–°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `definitions.py`** —Å —á–∏—Å—Ç—ã–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö:
   - `Parameter` - –∫–ª–∞—Å—Å –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∞–ª–≥–æ—Ä–∏—Ç–º–∞
   - `AlgorithmDefinition` - –∫–ª–∞—Å—Å –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ (—Ñ—É–Ω–∫—Ü–∏–∏/–ø—Ä–æ—Ü–µ–¥—É—Ä—ã)
   - `FunctionCallFrame` - –∫–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - `AlgorithmManager` - –∫–ª–∞—Å—Å –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø–æ–∏—Å–∫–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤
   - `FunctionReturnException` - –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `–∑–Ω–∞—á := –≤—ã—Ä–∞–∂–µ–Ω–∏–µ`

2. **–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è** –≤ `exceptions.py`:
   - `AlgorithmRedefinitionError`, `ArgumentMismatchError`, `AlgorithmNotFoundError`
   - `ReturnValueError`, `MissingReturnValueError`, `InvalidReturnValueError`
   - `ParameterModificationError`, `ParameterTypeError`
   - `FunctionReturnException`

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö** - —Å–æ–∑–¥–∞–Ω –∏ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω `test_algorithm_manager.py`

### –≠—Ç–∞–ø 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä üîÑ –í –ü–†–û–¶–ï–°–°–ï

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
1. **–î–æ–±–∞–≤–ª–µ–Ω `AlgorithmManager` –≤ `KumirInterpreterVisitor`** - –Ω–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤
2. **–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω `visitAlgorithmDefinition`** –≤ `declaration_visitors.py`:
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏ ANTLR
   - –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ `Parameter` –∏ `AlgorithmDefinition`
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –Ω–æ–≤–æ–º `AlgorithmManager`
   - –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º `ProcedureManager`

**–¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
- –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä –ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ç–µ–ª–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –ø—Ä–∏ —Å–±–æ—Ä–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
- –û—à–∏–±–∫–∞: "–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 'x' –Ω–µ –æ–±—ä—è–≤–ª–µ–Ω–∞" –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `–∑–Ω–∞—á := x + y`
- –ù—É–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –ª–æ–≥–∏–∫—É: —Å–±–æ—Ä –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π vs –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. **–°–æ–∑–¥–∞—Ç—å —Ä–µ–∂–∏–º "—Ç–æ–ª—å–∫–æ —Å–±–æ—Ä –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π"** –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ–ª–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤
2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π** –≤ expression_evaluator
3. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—ã–∑–æ–≤ –ø—Ä–æ—Ü–µ–¥—É—Ä** –≤ statement handlers
4. **–î–æ–±–∞–≤–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±–ª–∞—Å—Ç—è–º–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏** –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
5. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥–∞—á—É –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** (–∞—Ä–≥, —Ä–µ–∑, –∞—Ä–≥—Ä–µ–∑)
6. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `–∑–Ω–∞—á := –≤—ã—Ä–∞–∂–µ–Ω–∏–µ`** –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∑–Ω–∞—á–µ–Ω–∏–π

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `pyrobot/backend/kumir_interpreter/definitions.py` - –ù–û–í–´–ô
- `pyrobot/backend/kumir_interpreter/exceptions.py` - —Ä–∞—Å—à–∏—Ä–µ–Ω
- `pyrobot/backend/kumir_interpreter/interpreter_components/main_visitor.py` - –¥–æ–±–∞–≤–ª–µ–Ω AlgorithmManager
- `pyrobot/backend/kumir_interpreter/interpreter_components/declaration_visitors.py` - –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω visitAlgorithmDefinition

**–¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- `test_algorithm_manager.py` - –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö ‚úÖ
- `test_functions.kum` - –ø—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –ö—É–ú–∏—Ä —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏
- `test_parse_functions.py` - —Ç–µ—Å—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ (–ø—Ä–æ–±–ª–µ–º–∞ —Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º)

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

1. **–î–≤–æ–π–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** - –ø–æ–∫–∞ —á—Ç–æ –∞–ª–≥–æ—Ä–∏—Ç–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –∏ –≤ –Ω–æ–≤–æ–º `AlgorithmManager`, –∏ –≤ —Å—Ç–∞—Ä–æ–º `ProcedureManager` –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

2. **–ß–∏—Å—Ç—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö** - –Ω–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç ANTLR –∏ –ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä—É—é—Ç—Å—è

3. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è** - —Å—Ç–∞—Ä—ã–π –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

---

## –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê –ò–°–ü–û–õ–ù–ï–ù–ò–Ø –û–ü–†–ï–î–ï–õ–ï–ù–ò–ô –§–£–ù–ö–¶–ò–ô - ‚úÖ –†–ï–®–ï–ù–ê! (22.01.2025)

**üéâ –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û:** –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å —Ä–µ–∂–∏–º–æ–º —Å–±–æ—Ä–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π —Ñ—É–Ω–∫—Ü–∏–π!

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä –ø—ã—Ç–∞–ª—Å—è –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ç–µ–ª–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –æ—à–∏–±–∫–∞–º "Variable 'x' not declared", —Ç–∞–∫ –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ—É–Ω–∫—Ü–∏–π –µ—â–µ –Ω–µ –±—ã–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω—ã –≤ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏.

**–†–µ—à–µ–Ω–∏–µ:**
byenre### 1. –î–æ–±–∞–≤–ª–µ–Ω –†–µ–∂–∏–º –°–±–æ—Ä–∞ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –≤ main_visitor.py ‚úÖ

**–ù–æ–≤—ã–µ –ø–æ–ª—è –∏ –º–µ—Ç–æ–¥—ã:**
```python
self.definition_collection_mode: bool = False

def set_definition_collection_mode(self, mode: bool):
    self.definition_collection_mode = mode

def is_definition_collection_mode(self) -> bool:
    return self.definition_collection_mode

def collect_definitions_only(self, tree):
    """–°–±–∏—Ä–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏—Ö —Ç–µ–ª"""
    original_mode = self.definition_collection_mode
    try:
        self.set_definition_collection_mode(True)
        return self.visit(tree)
    finally:
        self.set_definition_collection_mode(original_mode)
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ declaration_visitors.py ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ `visitAlgorithmDefinition`
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∂–∏–º–∞ —Å–±–æ—Ä–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π:
```python
def visitAlgorithmDefinition(self, ctx):
    if self.is_definition_collection_mode():
        return None  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ–ª–∞ –≤ —Ä–µ–∂–∏–º–µ —Å–±–æ—Ä–∞
    # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
```

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–æ–≥–ª–∞—Å–Ω–æ ANTLR –≥—Ä–∞–º–º–∞—Ç–∏–∫–µ ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏–º–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–æ–≥–ª–∞—Å–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ `parameterDeclaration` ‚Üí `variableList` ‚Üí `variableDeclarationItem` ‚Üí `ID()`

### 4. –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ ‚úÖ

**–û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**
- `IN_PARAM` –¥–ª—è "–∞—Ä–≥" 
- `OUT_PARAM` –¥–ª—è "—Ä–µ–∑"
- `INOUT_PARAM` –¥–ª—è "–∞—Ä–≥—Ä–µ–∑"

### 5. –£—Å–ø–µ—à–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è ‚úÖ

**–¢–µ—Å—Ç `test_execute_functions.py` —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
```
‚úÖ –ü–µ—Ä–≤—ã–π –ø—Ä–æ—Ö–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ!
üìä –ù–∞–π–¥–µ–Ω–æ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤: 2
   - —Å—É–º–º–∞ (—Ñ—É–Ω–∫—Ü–∏—è)
     * x: —Ü–µ–ª (–∞—Ä–≥)
     * y: —Ü–µ–ª (–∞—Ä–≥)
     ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç: —Ü–µ–ª
   - –≤—ã–≤–µ—Å—Ç–∏_—Å—É–º–º—É (–ø—Ä–æ—Ü–µ–¥—É—Ä–∞)
```

---

## üìû –°–ò–°–¢–ï–ú–´ –í–´–ó–û–í–ê –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨–°–ö–ò–• –§–£–ù–ö–¶–ò–ô - –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø API ‚úÖ

**–î–ê–¢–ê:** 01.06.2025
**–°–¢–ê–¢–£–°:** ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–®–ò–ë–ö–ò API –ò–°–ü–†–ê–í–õ–ï–ù–´ - –ë–ê–ó–û–í–ê–Ø –°–ò–°–¢–ï–ú–ê –†–ê–ë–û–¢–ê–ï–¢!

### üõ†Ô∏è –ü–†–û–ë–õ–ï–ú–´ –ò–°–ü–†–ê–í–õ–ï–ù–´:

#### 1. API Compatibility Issues —Å ScopeManager ‚úÖ 
**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå `push_scope()` –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–∞–∫ –æ–∂–∏–¥–∞–ª–æ—Å—å
- ‚ùå –ú–µ—Ç–æ–¥ `set_variable` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ ScopeManager  
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è `declare_variable`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```python
# –ë–´–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
self.scope_manager.push_scope(f"function_{func_name}")  # ‚ùå
self.scope_manager.declare_variable(param.name, param_value.kumir_type)  # ‚ùå 
self.scope_manager.set_variable(param.name, param_value)  # ‚ùå

# –°–¢–ê–õ–û (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
self.scope_manager.push_scope()  # ‚úÖ –ë–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
self.scope_manager.declare_variable(
    param.name, 
    param_kumir_type,
    param_value,  # initial_value
    ctx.start.line,  # line_index
    ctx.start.column  # column_index
)  # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞
self.scope_manager.set_variable(param.name, param_value)  # ‚úÖ –¢–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
```

#### 2. AlgorithmDefinition Attribute Access ‚úÖ
**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå `algorithm_def.context` –∞—Ç—Ä–∏–±—É—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ç–µ–ª—É —Ñ—É–Ω–∫—Ü–∏–∏

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```python
# –ë–´–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
self.visit(algorithm_def.context.algorithmBody())  # ‚ùå

# –°–¢–ê–õ–û (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):  
self.visit(algorithm_def.body_context)  # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –∞—Ç—Ä–∏–±—É—Ç
```

#### 3. FunctionReturnException API ‚úÖ
**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå `return_exc.value` –∞—Ç—Ä–∏–±—É—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```python
# –ë–´–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
return return_exc.value  # ‚ùå

# –°–¢–ê–õ–û (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
return return_exc.return_value  # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –∞—Ç—Ä–∏–±—É—Ç
```

#### 4. –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –û—à–∏–±–∫–∏ —Å –û–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–º–∏ –°—Ç—Ä–æ–∫–∞–º–∏ ‚úÖ
**–ü—Ä–æ–±–ª–µ–º—ã:** –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–ª—É—á–∞–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ –±–µ–∑ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** –í—Å–µ —Å–ª—É—á–∞–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–Ω–æ—Å–∞–º–∏ —Å—Ç—Ä–æ–∫

### üß™ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:

**–¢–µ—Å—Ç `test_execute_functions.py`:**
```
üß™ –¢–µ—Å—Ç–∏—Ä—É—é –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏...
‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ! –†–µ–∑—É–ª—å—Ç–∞—Ç: 42
‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ–±—Ä–∞–Ω—ã!
üìù –§—É–Ω–∫—Ü–∏—è '—Å—É–º–º–∞' –Ω–∞–π–¥–µ–Ω–∞: True
   –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: 2
   –¢–∏–ø –≤–æ–∑–≤—Ä–∞—Ç–∞: —Ü–µ–ª
   * x: —Ü–µ–ª (–∞—Ä–≥)
   * y: —Ü–µ–ª (–∞—Ä–≥)
üéâ –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω!
```

**–ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:**
- ‚úÖ –§—É–Ω–∫—Ü–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- ‚úÖ –î–≤—É—Ö–ø—Ä–æ—Ö–æ–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ  
- ‚úÖ –ù–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ Python
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å IOHandler –∏ expression_evaluator —Ä–∞–±–æ—Ç–∞–µ—Ç

### üìã –¢–ï–ö–£–©–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –í–´–ó–û–í–ê –§–£–ù–ö–¶–ò–ô:

1. **AlgorithmManager** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π —Ñ—É–Ω–∫—Ü–∏–π
2. **expression_evaluator.py** - —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö
3. **main_visitor._call_user_function** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏ –≤—ã–∑–æ–≤
4. **–ó–∞–≥–ª—É—à–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∑–Ω–∞—á–µ–Ω–∏—è** - –ø–æ–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç KumirValue(42, KumirType.INT.value)

### üîÑ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:

1. **üîÑ –†–ï–ê–õ–ò–ó–û–í–ê–¢–¨ –ü–û–õ–ù–û–ï –í–´–ü–û–õ–ù–ï–ù–ò–ï –¢–ï–õ–ê –§–£–ù–ö–¶–ò–ò:**
   - –°–æ–∑–¥–∞—Ç—å –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   - –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ç–µ–ª–æ —Ñ—É–Ω–∫—Ü–∏–∏ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
   - –û–±—Ä–∞–±–æ—Ç–∞—Ç—å `–∑–Ω–∞—á := –≤—ã—Ä–∞–∂–µ–Ω–∏–µ` —á–µ—Ä–µ–∑ statement_handlers

2. **üîÑ –ò–ù–¢–ï–ì–†–ò–†–û–í–ê–¢–¨ –° –°–ò–°–¢–ï–ú–û–ô –í–û–ó–í–†–ê–¢–ê –ó–ù–ê–ß–ï–ù–ò–ô:**
   - –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `–∑–Ω–∞—á := –≤—ã—Ä–∞–∂–µ–Ω–∏–µ` 
   - –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å FunctionReturnException –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å procedure_manager

3. **üîÑ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –†–ï–ê–õ–¨–ù–´–• –í–´–ß–ò–°–õ–ï–ù–ò–ô:**
   - –ó–∞–º–µ–Ω–∏—Ç—å –∑–∞–≥–ª—É—à–∫—É (42) –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ `x + y`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ `—Å—É–º–º–∞(2, 3)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `5`

**–°–û–°–¢–û–Ø–ù–ò–ï:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã API —Ä–µ—à–µ–Ω—ã, –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ!
