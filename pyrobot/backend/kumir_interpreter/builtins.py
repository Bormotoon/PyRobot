# builtins.py
"""
Реализация встроенных функций языка КУМИР для текстового представления чисел
и преобразования строк в числовые и логические значения.
"""


def цел_в_лит(число):
    """
    Возвращает строковое представление целого числа.

    Прототип (КУМИР):
      алг лит цел_в_лит(цел число)
    """
    return str(число)


def вещ_в_лит(число):
    """
    Возвращает строковое представление вещественного числа.

    Прототип (КУМИР):
      алг лит вещ_в_лит(вещ число)
    """
    return str(число)


def лит_в_вещ(строка, успех):
    """
    Переводит строку в вещественное число.
    Если строка содержит только вещественное число, то возвращает число и "да";
    иначе – возвращает 0.0 и "нет".

    Прототип (КУМИР):
      алг вещ лит_в_вещ(лит строка, рез лог успех)

    *Замечание:* В данной реализации мы не изменяем переменную успех в окружении,
    а возвращаем результат в виде кортежа (значение, успех). Пользовательский код
    должен соответствующим образом обрабатывать возвращаемое значение.
    """
    try:
        result = float(строка)
        return result, "да"
    except:
        return 0.0, "нет"


def лит_в_цел(строка, успех):
    """
    Переводит строку в целое число.
    Если строка содержит только целое число, то возвращает число и "да";
    иначе – возвращает 0 и "нет".

    Прототип (КУМИР):
      алг цел лит_в_цел(лит строка, рез лог успех)

    *Замечание:* Аналогично функции лит_в_вещ, возвращается кортеж (значение, успех).
    """
    try:
        result = int(строка)
        return result, "да"
    except:
        return 0, "нет"


def Цел(строка, по_умолчанию):
    """
    Переводит строку в целое число.
    Если строка не является целым числом, возвращает значение по умолчанию.

    Прототип (КУМИР):
      алг цел Цел(лит строка, цел по умолчанию)
    """
    try:
        return int(строка)
    except:
        return по_умолчанию


def Вещ(строка, по_умолчанию):
    """
    Переводит строку в вещественное число.
    Если строка не является вещественным числом, возвращает значение по умолчанию.

    Прототип (КУМИР):
      алг вещ Вещ(лит строка, вещ по умолчанию)
    """
    try:
        return float(строка)
    except:
        return по_умолчанию


def Лог(строка, по_умолчанию):
    """
    Переводит строку в логическое значение.
    Распознаёт следующие строки как истину: "да", "1", "истина";
    как ложь: "нет", "0", "ложь".
    Если строка не соответствует ни одному варианту, возвращает значение по умолчанию.

    Прототип (КУМИР):
      алг лог Лог(лит строка, лог по умолчанию)
    """
    s = str(строка).strip().lower()
    if s in ["да", "1", "истина"]:
        return True
    elif s in ["нет", "0", "ложь"]:
        return False
    else:
        return по_умолчанию
